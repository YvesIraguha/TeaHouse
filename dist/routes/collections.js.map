{"version":3,"sources":["../../src/routes/collections.js"],"names":["router","express","Router","upload","route","post","fields","name","validateCollection","checkAdmin","Collection","create","get","validatePages","validateCollectionType","getAll","all","checkAllowedMethod","validateParamsId","fetchOne","checkCollectionPresence","deleteOne","put","validateCollectionUpdate","updateCollection"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAOA;;AAEA,IAAMA,MAAM,GAAGC,oBAAQC,MAAR,EAAf;;AACA,IAAMC,MAAM,GAAG,yBAAf;AAEAH,MAAM,CACHI,KADH,CACS,GADT,EAEGC,IAFH,CAGIF,MAAM,CAACG,MAAP,CAAc,CAAC;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAAD,EAAmB;AAAEA,EAAAA,IAAI,EAAE;AAAR,CAAnB,CAAd,CAHJ,EAIIC,6BAJJ,EAKIC,qBALJ,EAMI,6BAAaC,uBAAWC,MAAxB,CANJ,EAQGC,GARH,CAQOC,wBARP,EAQsBC,iCARtB,EAQ8C,6BAAaJ,uBAAWK,MAAxB,CAR9C,EASGC,GATH,CASOC,yBATP;AAWAjB,MAAM,CACHI,KADH,CACS,MADT,EAEGQ,GAFH,CAEOM,2BAFP,EAEyB,6BAAaR,uBAAWS,QAAxB,CAFzB,YAIID,2BAJJ,EAKIT,qBALJ,EAMI,6BAAaW,oCAAb,CANJ,EAOI,6BAAaV,uBAAWW,SAAxB,CAPJ,EASGC,GATH,CAUIJ,2BAVJ,EAWIK,mCAXJ,EAYId,qBAZJ,EAaI,6BAAaC,uBAAWc,gBAAxB,CAbJ,EAgBGR,GAhBH,CAgBOC,yBAhBP;eAkBejB,M","sourcesContent":["import express from \"express\";\nimport multer from \"multer\";\nimport Collection from \"../controllers/collection\";\nimport asyncHandler from \"../middlewarres/handleAsync\";\nimport checkAllowedMethod from \"../middlewarres/allowedMethod\";\nimport { checkAdmin } from \"../middlewarres/checkAuth\";\nimport {\n  validateParamsId,\n  validatePages,\n  validateCollectionType,\n  validateCollection,\n  validateCollectionUpdate\n} from \"../middlewarres/validator\";\nimport { checkCollectionPresence } from \"../middlewarres/collection\";\n\nconst router = express.Router();\nconst upload = multer();\n\nrouter\n  .route(\"/\")\n  .post(\n    upload.fields([{ name: \"file\" }, { name: \"previewImage\" }]),\n    validateCollection,\n    checkAdmin,\n    asyncHandler(Collection.create)\n  )\n  .get(validatePages, validateCollectionType, asyncHandler(Collection.getAll))\n  .all(checkAllowedMethod);\n\nrouter\n  .route(\"/:id\")\n  .get(validateParamsId, asyncHandler(Collection.fetchOne))\n  .delete(\n    validateParamsId,\n    checkAdmin,\n    asyncHandler(checkCollectionPresence),\n    asyncHandler(Collection.deleteOne)\n  )\n  .put(\n    validateParamsId,\n    validateCollectionUpdate,\n    checkAdmin,\n    asyncHandler(Collection.updateCollection)\n  )\n\n  .all(checkAllowedMethod);\n\nexport default router;\n"],"file":"collections.js"}