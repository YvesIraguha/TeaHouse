{"version":3,"sources":["../../src/middlewarres/validator.js"],"names":["validateIndividualPiece","req","res","next","schema","Joi","object","keys","type","string","valid","required","title","min","author","body","validate","error","status","send","message","validatePieceUpdate","validateParamsId","id","uuid","params","validateCollection","files","file","array","previewImage","validateCollectionUpdate","validatePages","page","number","integer","positive","query","validatePieceType","validateCollectionType"],"mappings":"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","sourcesContent":["import Joi from \"joi\";\n\nexport const validateIndividualPiece = (req, res, next) => {\n  const schema = Joi.object().keys({\n    type: Joi.string()\n      .valid(\"Short story\", \"Poem\")\n      .required(),\n    title: Joi.string()\n      .min(14)\n      .required(),\n    author: Joi.string()\n      .min(4)\n      .required(),\n    body: Joi.string()\n      .min(100)\n      .required()\n  });\n  const { body } = req;\n  const { error } = Joi.validate(body, schema);\n\n  if (error) {\n    return res.status(400).send({ error: error.message });\n  }\n  next();\n};\n\nexport const validatePieceUpdate = (req, res, next) => {\n  const schema = Joi.object().keys({\n    title: Joi.string().min(10),\n    author: Joi.string().min(4),\n    body: Joi.string().min(100),\n    type: Joi.string().valid(\"Short story\", \"Poem\")\n  });\n  const { body } = req;\n  const { error } = Joi.validate(body, schema);\n\n  if (error) {\n    return res.status(400).send({ error: error.message });\n  }\n  next();\n};\n\nexport const validateParamsId = (req, res, next) => {\n  const schema = Joi.object().keys({\n    id: Joi.string().uuid()\n  });\n  const { id } = req.params;\n  const { error } = Joi.validate({ id }, schema);\n\n  if (error) {\n    return res.status(400).send({ error: error.message });\n  }\n  next();\n};\n\nexport const validateCollection = (req, res, next) => {\n  const schema = Joi.object().keys({\n    type: Joi.string()\n      .valid(\"Book series\", \"images\")\n      .required(),\n    title: Joi.string()\n      .min(5)\n      .required(),\n    author: Joi.string()\n      .min(4)\n      .required(),\n    files: Joi.object({\n      file: Joi.array().required(),\n      previewImage: Joi.array().required()\n    }).required()\n  });\n  const { body } = req;\n  const { files } = req;\n  const { error } = Joi.validate({ ...body, files }, schema);\n  if (error) {\n    return res.status(400).send({ error: error.message });\n  }\n  next();\n};\n\nexport const validateCollectionUpdate = (req, res, next) => {\n  const schema = Joi.object().keys({\n    title: Joi.string().min(10),\n    author: Joi.string().min(4),\n    files: Joi.object({\n      file: Joi.array(),\n      previewImage: Joi.array()\n    }),\n    type: Joi.string().valid(\"Book series\", \"images\")\n  });\n  const { body } = req;\n  const { files } = req;\n  const { error } = Joi.validate({ ...body, files }, schema);\n  if (error) {\n    return res.status(400).send({ error: error.message });\n  }\n  next();\n};\n\nexport const validatePages = (req, res, next) => {\n  const schema = Joi.object().keys({\n    page: Joi.number()\n      .integer()\n      .positive()\n      .min(1)\n      .required()\n  });\n  const { page } = req.query;\n  const { error } = Joi.validate({ page }, schema);\n  if (error) {\n    return res.status(400).send({ error: error.message });\n  }\n  next();\n};\n\nexport const validatePieceType = (req, res, next) => {\n  const schema = Joi.object().keys({\n    type: Joi.string()\n      .valid(\"Short story\", \"Poem\")\n      .required()\n  });\n  const { type } = req.query;\n  const { error } = Joi.validate({ type }, schema);\n  if (error) {\n    return res.status(400).send({ error: error.message });\n  }\n  next();\n};\n\nexport const validateCollectionType = (req, res, next) => {\n  const schema = Joi.object().keys({\n    type: Joi.string()\n      .valid(\"Book series\", \"images\")\n      .required()\n  });\n  const { type } = req.query;\n  const { error } = Joi.validate({ type }, schema);\n  if (error) {\n    return res.status(400).send({ error: error.message });\n  }\n  next();\n};\n"],"file":"validator.js"}